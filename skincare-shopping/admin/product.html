<!DOCTYPE html>
<html lang="en">
<head>
    <title>Danh mục</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="icon" type="image/png" href="assets/favicon.ico"/>

	<!-- Import lib -->
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css">
	<link rel="stylesheet" type="text/css" href="fontawesome-free/css/all.min.css">
	<link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
	<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
	<!-- End import lib -->

	<link rel="stylesheet" type="text/css" href="style.css">

	<!-- bootstrap -->
	<!-- CSS only -->
<!-- 	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
 --></head>
<body class="overlay-scrollbar">
    <div class="navbar">
		<!-- nav left -->
		<ul class="navbar-nav">
			<li class="nav-item">
				<a class="nav-link">
					<i class="fas fa-bars" onclick="collapseSidebar()"></i>
				</a>
			</li>
			<!-- <li class="nav-item">
				<img src="assets/AT-pro-black.png" alt="ATPro logo" class="logo logo-light">
				<img src="assets/AT-pro-white.png" alt="ATPro logo" class="logo logo-dark">
			</li> -->
		</ul>
		<!-- end nav left -->
		<!-- form -->
		<form class="navbar-search">
			<input type="text" name="Search" class="navbar-search-input" placeholder="What you looking for...">
			<i class="fas fa-search"></i>
		</form>
		<!-- end form -->
		<!-- nav right -->
		<ul class="navbar-nav nav-right">
			<li class="nav-item mode">
				<a class="nav-link" href="#" onclick="switchTheme()">
					<i class="fas fa-moon dark-icon"></i>
					<i class="fas fa-sun light-icon"></i>
				</a>
			</li>
			<li class="nav-item dropdown">
				<a class="nav-link">
					<i class="fas fa-bell dropdown-toggle" data-toggle="notification-menu"></i>
					<span class="navbar-badge">15</span>
				</a>
				<ul id="notification-menu" class="dropdown-menu notification-menu">
					<div class="dropdown-menu-header">
						<span>
							Notifications
						</span>
					</div>
					<div class="dropdown-menu-content overlay-scrollbar scrollbar-hover">
						<li class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-gift"></i>
								</div>
								<span>
									Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
									<br>
									<span>
										15/07/2020
									</span>
								</span>
							</a>
						</li>
						<li class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-tasks"></i>
								</div>
								<span>
									Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
									<br>
									<span>
										15/07/2020
									</span>
								</span>
							</a>
						</li>
						<li class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-gift"></i>
								</div>
								<span>
									Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
									<br>
									<span>
										15/07/2020
									</span>
								</span>
							</a>
						</li>

						<li class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-tasks"></i>
								</div>
								<span>
									Lorem ipsum dolor sit amet, consectetuer adipiscing elit.
									<br>
									<span>
										15/07/2020
									</span>
								</span>
							</a>
						</li>
					</div>
					<div class="dropdown-menu-footer">
						<span>
							View all notifications
						</span>
					</div>
				</ul>
			</li>
			<li class="nav-item avt-wrapper">
				<div class="avt dropdown">
					<img src="assets/93.png" alt="User image" class="dropdown-toggle" data-toggle="user-menu">
					<ul id="user-menu" class="dropdown-menu">
						<li  class="dropdown-menu-item">
							<a class="dropdown-menu-link">
								<div>
									<i class="fas fa-user-tie"></i>
								</div>
								<span>Profile</span>
							</a>
						</li>
						<li class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-cog"></i>
								</div>
								<span>Settings</span>
							</a>
						</li>
						<li  class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="far fa-credit-card"></i>
								</div>
								<span>Payments</span>
							</a>
						</li>
						<li  class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-spinner"></i>
								</div>
								<span>Projects</span>
							</a>
						</li>
						<li  class="dropdown-menu-item">
							<a href="#" class="dropdown-menu-link">
								<div>
									<i class="fas fa-sign-out-alt"></i>
								</div>
								<span>Logout</span>
							</a>
						</li>
					</ul>
				</div>
			</li>
		</ul>
		<!-- end nav right -->
	</div>
    <div class="sidebar">
		<ul class="sidebar-nav">
			<li class="sidebar-nav-item">
				<a href="index.html" class="sidebar-nav-link ">
					<div>
						<i class="fas fa-tachometer-alt "></i>
					</div>
					<span>
						Trang chủ
					</span>
				</a>
			</li>
			<li class="sidebar-nav-item">
				<a href="catalog.html" class="sidebar-nav-link ">
					<div>
						<i class='bx bxs-blanket'></i>
					</div>
					<span>
						Danh Mục
					</span>
				</a>
			</li>
			<li class="sidebar-nav-item">
				<a href="product.html" class="sidebar-nav-link active">
					<div>
						<i class="bx bx-closet"></i>
					</div>
					<span>Sản Phẩm</span>
				</a>
			</li>
			<li  class="sidebar-nav-item">
				<a href="cart.html" class="sidebar-nav-link">
					<div>
						<i class="fas fa-tasks"></i>
					</div>
					<span>Cart</span>
				</a>
			</li>
		</ul>
	</div>
    <div class="wrappers">
		<div class="container mt-5">
			<h1 class="title">Danh sách sản phẩm</h1>
		 <table class="table">
			 <thead>
			   <tr class="tableth">
	
				 <th scope="col">ID</th>
				 <th scope="col">Name</th>
				 <th scope="col">Hình ảnh</th>
				 <th scope="col">Giá</th>
				 <th scope="col">Chi tiết</th>
				 <th scope="col">Thêm</th>
				 <th scope="col">Xóa</th>
			   </tr>
			 </thead>
			 <tbody id="list-product">
			   <!-- tr class="tabletd">
				 <td>1</td>
				 <td>Cream Body</td>
				 <td><img src="../images/whitening body cream.jpg" alt=""></td>
				 <td>800.000VNĐ</td>
				 <td>Kem dưỡng body</td>
				 <td><a href="#">Xoa</a></td>
				 <td><a href="#">Sua</a></td>
			   </tr>
			--> 
			 </tbody>
		   </table>
		   <div class="addpro"><a href="addproduct.html">Thêm sản phẩm</a></div> 
		</div>
	
    </div>
	
    


    <!-firebase-->
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>

    <script id="mainScript">

            var firebaseConfig = {
                apiKey: "AIzaSyDHab9J0kktzjPwTQJSq8nX7YaWIhCXokM",
                authDomain: "ps11760-lta.firebaseapp.com",
                databaseURL: "https://ps11760-lta-default-rtdb.firebaseio.com",
                projectId: "ps11760-lta",
                storageBucket: "ps11760-lta.appspot.com",
                messagingSenderId: "821133202295",
                appId: "1:821133202295:web:e278525d0b88953960c772",
                measurementId: "G-DBT6FK3F9M"
                };
                // Initialize Firebase
                firebase.initializeApp(firebaseConfig);

                var database = firebase.database();

                var cateid,idP,nameP;

                function Ready(){
                    idDM = document.getElementById('idDm').value;
					cateid = document.getElementById('cateid').value;
                    idP = document.getElementById('idPro').value;
                    nameP = document.getElementById('namePro').value;
                    
                }
                // Hiển thị catalog //
                database.ref('product').orderByKey().once('value').then(function(snapshot) {
 
                    var listProduct = snapshot.val()

                    let listProductView = document.querySelector('#list-product')

                    console.log(listProduct)

                    for(let index in listProduct) {
                        console.log(listProduct[index])
                        let product = `<tr class="tabletd">
											<td>${listProduct[index].idProduct}</td>
											<td>${listProduct[index].name}</td>
											<td><img src="../images/${listProduct[index].images}" alt=""></td>
											<td>${listProduct[index].price}</td>
											<td>${listProduct[index].note}</td>
											<td><a href="#">Xoa</a></td>
											<td><a href="#">Sua</a></td>
										</tr>`
                        
                        listProductView.innerHTML+=product
                    }
                    
                    })
                /* Thêm */
                document.getElementById('insert').onclick = function(){
                    Ready(); 
                    firebase.database().ref('product/'+idDM).set({
                        cate_id: cateid,
                        idProduct: idP,
						name: nameP
                    });
                }
                /* Chọn */
                document.getElementById('select').onclick = function(){
                    Ready();
                    firebase.database().ref('product/'+idDM).on('value',function(snapshot){
                        document.getElementById('nameCat').value = snapshot.val().nameCat;
                        document.getElementById('idCat').value = snapshot.val().idCat;
                    });
                }
                /* Cập nhật */
                document.getElementById('update').onclick = function(){
                    Ready();
                    firebase.database().ref('product/'+idDM).update({
                        nameCat: nameC,
                        idCat: idC
                    });
                }
                /* Xóa */
                document.getElementById('delete').onclick = function(){
                    Ready();
                    firebase.database().ref('product/'+idDM).remove();
                }
    </script>
    <!-- import script -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
	<script src="index.js"></script>
	<script src="app.js"></script>
	<!-- end import script -->
</body>
</html>